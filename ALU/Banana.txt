# starting loop

.start
#create player  player coordinate x = 160 y = 96
MOVI $160 r1
LUI $23 r3
ADDI $112 r3
STOR r1 r3
ADDI $4 r3
STOR r1 r3

#create platforms
MOVI $150 r2
ADDI $4 r3
STOR r1 r3
ADDI $4 r3
STOR r2 r3
#platform 2
LUI $1 r1
ADDI $224 r1
MOVI $10 r2
ADDI $4 r3
STOR r1 r3
ADDI $4 r3
STOR r2 r3

#check button input
.loop
LUI $255 r3
ADDI $255 r3
LOAD r1 r3
MOVI $1 r2
CMP r1 r2
BNE $2
BUC .loop
LUI $255 r8
ADDI $1 r8 # this loads value -255 into the velocity register 

#gameloop to be run
.gameloop
#check input buttons and move character
LUI $255 r2
ADDI $255 r2
LOAD r1 r2
CMP r0 r1
BEQ .noButton # jump as no buttons are pressed

MOVI $2 r2 # check if left
CMP r2 r1
BNE .rightCheck # jump if not left

#handle case where left is pushed
MOVI $0 r3
LUI $23 r3
ADDI $112 r3
LOAD r4 r3 #store player x coordinate in r4
SUBI $5 r5 #subtract 5 from x coordinate
STOR r4 r3 #store new x player value

#check if right
.rightCheck
MOVI $3 r2 # check if right
CMP r2 r1
BNE  .noButton # jump if not right
MOVI $0 r3
LUI $23 r3
ADDI $112 r3
LOAD r4 r3 #store player x coordinate in r4
ADDI $5 r5 #subtract 5 from x coordinate
STOR r4 r3 #store new x player value
.noButton

#move platforms

LUI $23 r3
ADDI $124 r3 # memory location for y coordinate 1st platform
LOAD r4 r3
SUB r8 r4 #sub the speed from the 1st platform
STOR r4 r3
ADDI $8 r3
LOAD r4 r3
SUB r8 r4 #sub the speed from the 2nd platform
STOR r4 r3

#decrement speed
ADDI $1 r8

#check if player is out of bounds by checking if walls are above the screen
LUI $8 r1
LUI $23 r3
ADDI $124 r3
LOAD r4 r3 # load y coordinate of first platform
CMP r1 r4 # compare first platform y to negative number
BLT .notDead
ADDI $8 r3 # get address for second platform y value
LOAD r4 r3 # load y coordinate of second platform
CMP r1 r4 # compare first platform y to negative number
BLT .notDead
BUC .start

.notDead

#check if platforms out of bounds
#if out of bounds create new platform

# this code to be implemented right here

#check collisions
#check first platform x value in range
LUI $23 r3	#get x value of player
ADDI $112 r3
LOAD r1 r3   # puts x value of player in r1
ADDI $8 r3
LOAD r2 r3   # puts x value of platform 1 in r2
MOV r2 r4 # put x value of platform 1 in r4
ADDI $50 r2 # add 50 to the x value of platform 1 
cmp r2 r1 # cmp x value + 50 of platform 1 and x value of player
BLT .secondPlatform
SUBI $50 r4
cmp r4 r1 # cmp x value - 50 of platform 1 and x value of player
BGT .secondPlatform

# check if y value of player is in range of platform 1 
SUBI $4 r3 # move pointer to y value of player
LOAD r1 r3 # r1 is y value of player
ADDI $8 r3 # move pointer to y value of platform 1
LOAD r2 r3 # load platform 1 y value to r2
# figure out how to check if collision on y axis


.secondPlatform
# repeat instructions from above
.noCollsions

#jump back to check for button input
BUC .gameloop